<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teacher AI Rwanda 2026 ‚Äì Smart Learning</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      background: linear-gradient(145deg, #0b1f2e 0%, #1d4a3e 45%, #f5b342 100%);
      background-size: 200% 200%;
      animation: floatGradient 14s ease infinite;
      transition: background 0.4s, color 0.3s;
    }

    /* light theme overrides */
    body.light {
      background: linear-gradient(145deg, #d4eaf0 0%, #b8d9c6 45%, #fdebbc 100%);
      background-size: 200% 200%;
      animation: floatGradient 14s ease infinite;
    }
    body.light .glass-card {
      background: rgba(245, 245, 250, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.7);
      box-shadow: 0 20px 40px -12px rgba(5, 55, 40, 0.25);
    }
    body.light .user-message {
      background: rgba(25, 85, 70, 0.15);
      color: #052e25;
    }
    body.light .ai-message {
      background: rgba(245, 180, 60, 0.2);
      color: #1e3b2f;
    }
    body.light select, body.light textarea, body.light button {
      background: rgba(255,255,240,0.7);
      color: #0b2f25;
      border-color: #c0b28a;
    }

    @keyframes floatGradient {
      0% { background-position: 0% 0%; }
      50% { background-position: 100% 100%; }
      100% { background-position: 0% 0%; }
    }

    /* glassmorphism core */
    .glass-card {
      background: rgba(10, 30, 30, 0.4);
      backdrop-filter: blur(14px) saturate(180%);
      -webkit-backdrop-filter: blur(14px) saturate(180%);
      border: 1px solid rgba(255, 220, 150, 0.25);
      border-radius: 2.5rem 2.5rem 2.5rem 2.5rem;
      box-shadow: 0 30px 50px -20px rgba(0, 20, 10, 0.5), inset 0 1px 2px rgba(255,255,230,0.1);
      width: min(1200px, 100%);
      padding: 1.8rem 2rem 2rem;
      transition: background 0.3s, border 0.2s;
    }

    /* header area */
    .app-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }
    .title-section h1 {
      font-size: clamp(1.8rem, 5vw, 2.8rem);
      font-weight: 600;
      letter-spacing: -0.02em;
      background: linear-gradient(130deg, #ffe9b0, #b7efcd, #9ed6f2);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .title-section p {
      color: rgba(255, 250, 220, 0.9);
      font-weight: 400;
      font-size: 1rem;
    }
    .theme-toggle {
      background: rgba(255,255,245,0.1);
      border: 1px solid rgba(255,210,90,0.4);
      border-radius: 4rem;
      padding: 0.4rem 0.6rem;
      display: flex;
      gap: 0.5rem;
      backdrop-filter: blur(4px);
    }
    .theme-toggle button {
      background: transparent;
      border: none;
      font-size: 1.4rem;
      padding: 0.2rem 0.7rem;
      border-radius: 3rem;
      cursor: pointer;
      transition: 0.2s;
      color: #ffecb3;
    }
    body.light .theme-toggle button {
      color: #3a5a4a;
    }
    .theme-toggle button.active-theme {
      background: rgba(250, 235, 150, 0.3);
      box-shadow: 0 0 8px #f9c35c;
    }

    /* controls */
    .subject-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 2rem;
      align-items: center;
    }
    .subject-selector {
      background: rgba(15, 40, 35, 0.45);
      backdrop-filter: blur(8px);
      padding: 0.7rem 1.5rem;
      border-radius: 3rem;
      border: 1px solid rgba(255, 200, 100, 0.4);
      font-size: 1rem;
      font-weight: 500;
      color: #fef7e6;
      outline: none;
      cursor: pointer;
      flex: 1 1 220px;
    }
    .subject-selector option {
      background: #0a2f28;
      color: #f0e5d2;
    }
    .voice-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #d9f0d9;
      font-size: 0.95rem;
      background: rgba(0,0,0,0.2);
      padding: 0.2rem 1rem;
      border-radius: 2rem;
    }
    .voice-indicator span {
      font-size: 1.2rem;
    }

    /* chat window */
    .chat-window {
      background: rgba(0, 12, 10, 0.2);
      border-radius: 2rem;
      padding: 1.8rem 1.2rem;
      max-height: 400px;
      min-height: 280px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1.7rem;
      scroll-behavior: smooth;
      border: 1px solid rgba(255, 210, 120, 0.15);
    }
    .message {
      max-width: 80%;
      padding: 1rem 1.4rem;
      border-radius: 1.8rem;
      line-height: 1.5;
      font-size: 1rem;
      box-shadow: 0 8px 16px -12px black;
      transition: 0.2s;
      word-break: break-word;
    }
    .user-message {
      align-self: flex-end;
      background: rgba(45, 120, 100, 0.45);
      backdrop-filter: blur(4px);
      border-bottom-right-radius: 0.4rem;
      color: #f5f2e0;
      border: 1px solid rgba(255, 215, 120, 0.3);
    }
    .ai-message {
      align-self: flex-start;
      background: rgba(150, 120, 50, 0.4);
      backdrop-filter: blur(4px);
      border-bottom-left-radius: 0.4rem;
      color: #fffbee;
      border: 1px solid rgba(255, 230, 170, 0.4);
    }
    .typing-indicator {
      display: flex;
      gap: 0.5rem;
      padding: 1rem 1.6rem;
      background: rgba(60, 65, 40, 0.4);
      border-radius: 4rem;
      align-self: flex-start;
      backdrop-filter: blur(4px);
      color: #ecd9a2;
    }
    .typing-indicator span {
      width: 0.6rem;
      height: 0.6rem;
      background: #facf8b;
      border-radius: 50%;
      animation: thinking 1.4s infinite;
      opacity: 0.7;
    }
    .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
    .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes thinking {
      0%, 100% { transform: scale(1); opacity: 0.4; }
      50% { transform: scale(1.3); opacity: 1; background: #ffdd9e; }
    }

    /* input */
    .input-panel {
      display: flex;
      gap: 0.8rem;
      flex-wrap: wrap;
    }
    textarea {
      flex: 1 1 250px;
      background: rgba(20, 35, 30, 0.5);
      border: 1px solid rgba(250, 200, 90, 0.3);
      border-radius: 2.5rem;
      padding: 1rem 1.5rem;
      font-size: 1rem;
      color: #f9f2da;
      outline: none;
      resize: vertical;
      min-height: 60px;
      backdrop-filter: blur(4px);
      transition: border 0.2s;
    }
    textarea:focus {
      border-color: #fdcd6e;
    }
    .action-buttons {
      display: flex;
      gap: 0.5rem;
    }
    .btn {
      background: rgba(30, 65, 50, 0.7);
      border: 1px solid rgba(255, 195, 80, 0.5);
      padding: 0 2rem;
      border-radius: 3rem;
      font-size: 1rem;
      font-weight: 500;
      color: #fff4dd;
      cursor: pointer;
      backdrop-filter: blur(8px);
      transition: 0.2s;
      display: flex;
      align-items: center;
      gap: 0.3rem;
      white-space: nowrap;
    }
    .btn:hover {
      background: rgba(40, 90, 70, 0.8);
      border-color: #ffcd7e;
      box-shadow: 0 6px 14px rgba(0, 30, 10, 0.4);
    }
    .btn.speak {
      background: rgba(160, 120, 40, 0.6);
    }

    /* micro animation */
    .cursor-typing {
      display: inline-block;
      width: 2px;
      height: 1.2em;
      background: #fbe593;
      margin-left: 4px;
      vertical-align: middle;
      animation: blink 1s infinite;
    }
    @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }

    .footer-note {
      text-align: center;
      margin-top: 1.5rem;
      font-size: 0.8rem;
      color: rgba(230, 240, 200, 0.6);
    }

    /* scrollbar */
    .chat-window::-webkit-scrollbar { width: 6px; }
    .chat-window::-webkit-scrollbar-track { background: transparent; }
    .chat-window::-webkit-scrollbar-thumb { background: #b8a36d; border-radius: 10px; }
  </style>
</head>
<body>
  <div class="glass-card" id="appContainer">
    <div class="app-header">
      <div class="title-section">
        <h1>üá∑üáº Teacher AI 2026</h1>
        <p>smart learning ¬∑ ikinyarwanda ¬∑ steam</p>
      </div>
      <div class="theme-toggle" id="themeToggle">
        <button id="lightThemeBtn" class="active-theme" aria-label="Light theme">‚òÄÔ∏è</button>
        <button id="darkThemeBtn" aria-label="Dark theme">üåô</button>
      </div>
    </div>

    <div class="subject-row">
      <select id="subjectSelect" class="subject-selector">
        <option value="Mathematics">üìê Mathematics</option>
        <option value="English">üìñ English</option>
        <option value="Science">üî¨ Science</option>
        <option value="Kinyarwanda">üó£Ô∏è Kinyarwanda</option>
        <option value="History">üèõÔ∏è History</option>
        <option value="General">üåç General</option>
      </select>
      <div class="voice-indicator" id="voiceIndicator">
        <span>üîä</span> <span id="voiceStatus">voice on</span>
      </div>
    </div>

    <!-- chat messages container -->
    <div class="chat-window" id="chatWindow">
      <div class="message ai-message" id="welcomeMsg"> Muraho! I'm Teacher AI Rwanda. Choose a subject and ask anything. </div>
      <!-- messages will be injected here -->
    </div>

    <!-- typing loading state (hidden by default) -->
    <div id="thinkingIndicator" class="typing-indicator" style="display: none; margin-bottom: 12px;">
      <span></span><span></span><span></span><span style="margin-left: 8px;">thinking...</span>
    </div>

    <div class="input-panel">
      <textarea id="userInput" placeholder="Ask a question... (e.g., solve 2x+3=7)" rows="1"></textarea>
      <div class="action-buttons">
        <button class="btn" id="sendBtn">üì§ Send</button>
        <button class="btn speak" id="speakBtn">üîä Speak</button>
      </div>
    </div>
    <div class="footer-note">‚ú® step‚Äëby‚Äëstep ¬∑ encouraging ¬∑ always curious</div>
  </div>

  <script>
    (function() {
      // ---------- DOM elements ----------
      const body = document.body;
      const chatWindow = document.getElementById('chatWindow');
      const userInput = document.getElementById('userInput');
      const sendBtn = document.getElementById('sendBtn');
      const speakBtn = document.getElementById('speakBtn');
      const subjectSelect = document.getElementById('subjectSelect');
      const thinkingDiv = document.getElementById('thinkingIndicator');
      const voiceStatus = document.getElementById('voiceStatus');
      const lightBtn = document.getElementById('lightThemeBtn');
      const darkBtn = document.getElementById('darkThemeBtn');

      // ---------- state ----------
      let isThinking = false;
      let speechSupported = true;
      if (!window.speechSynthesis) {
        voiceStatus.innerText = 'voice unavailable';
        speechSupported = false;
        speakBtn.disabled = true;
        speakBtn.style.opacity = 0.5;
      }

      // ---------- theme ----------
      function setTheme(theme) {
        if (theme === 'light') {
          body.classList.add('light');
          lightBtn.classList.add('active-theme');
          darkBtn.classList.remove('active-theme');
        } else {
          body.classList.remove('light');
          darkBtn.classList.add('active-theme');
          lightBtn.classList.remove('active-theme');
        }
      }
      lightBtn.addEventListener('click', () => setTheme('light'));
      darkBtn.addEventListener('click', () => setTheme('dark'));

      // ---------- helpers ----------
      function addMessage(text, sender = 'ai', animate = false) {
        const msgDiv = document.createElement('div');
        msgDiv.classList.add('message', sender === 'ai' ? 'ai-message' : 'user-message');

        if (animate && sender === 'ai') {
          // typing animation effect (simulated)
          let i = 0;
          const speed = 20;
          msgDiv.innerHTML = ''; // will fill gradually
          chatWindow.appendChild(msgDiv);
          chatWindow.scrollTop = chatWindow.scrollHeight;

          function typeChar() {
            if (i < text.length) {
              msgDiv.innerHTML += text.charAt(i) === '\n' ? '<br>' : text.charAt(i);
              i++;
              setTimeout(typeChar, speed);
              chatWindow.scrollTop = chatWindow.scrollHeight;
            } else {
              // add blinking cursor at end for a moment? remove if needed, but we can add a small cursor effect
              const cursorSpan = document.createElement('span');
              cursorSpan.className = 'cursor-typing';
              msgDiv.appendChild(cursorSpan);
              setTimeout(() => cursorSpan.remove(), 800);
            }
          }
          typeChar();
        } else {
          msgDiv.innerText = text;
          chatWindow.appendChild(msgDiv);
          chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        if (!animate) chatWindow.scrollTop = chatWindow.scrollHeight;
      }

      // AI reasoning engine (subject‚Äëaware, step‚Äëby‚Äëstep, teacher tone)
      function generateAIResponse(question, subject) {
        const q = question.toLowerCase();
        // Professional & structured, Rwanda flavour
        const mathResponses = [
          "Let‚Äôs solve step by step. First, identify the operation. If 2x + 3 = 7, subtract 3 from both sides ‚Üí 2x = 4. Then divide by 2 ‚Üí x = 2. Do you see why we do inverse operations?",
          "To find the area of a rectangle: length √ó width. For a rectangle of length 8cm and width 3cm, area = 24 cm¬≤. In real life, we use this to measure fields or classrooms. Need another example?",
          "Fractions: ‚Öì + ‚Öô requires common denominator (6). ‚Öì = 2/6, so 2/6+1/6=3/6=1/2. Think of slicing an umutsima wafer into pieces."
        ];
        const englishResponses = [
          "Great question! The past tense of 'go' is 'went'. Example: 'Yesterday we went to school.' Irregular verbs have special forms. Would you like a list of common irregular verbs?",
          "A simple sentence has a subject and verb: 'The teacher explains.' To add detail, use adjectives: 'The kind teacher explains clearly.' Let's practise building sentences.",
          "When forming questions in English: 'Do you like reading?' For he/she/it we use 'Does' ‚Äî 'Does she like reading?'."
        ];
        const scienceResponses = [
          "Photosynthesis: plants use sunlight, water and CO‚ÇÇ to make glucose and oxygen. Equation: 6CO‚ÇÇ + 6H‚ÇÇO ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ. In Rwanda, think of banana leaves or ipamba.",
          "The water cycle: evaporation (from Lake Kivu), condensation (clouds), precipitation (rain), collection. It never stops ‚Äî it's Earth's natural recycling.",
          "Matter exists as solid, liquid, gas. Ice (solid) melts into water (liquid), heated becomes vapour (gas). Can you name a solid in your kitchen?"
        ];
        const kinyarwandaResponses = [
          "Injya! 'Amata' n'ijambo ry'ikinyarwanda risobanura 'milk'. Urugero: 'Ndahaza amata' ‚Äì I drink milk. None se wifuza kumenya izindi nshinga?",
          "Mu Kinyarwanda, inshinga zihinduka ukurikije igihe. 'Gusoma' (to read) -> ndasoma (present), nasomye (past). Reka twifatire urugero: 'Ejo nasomye igitabo'.",
          "Amagambo y'ibanze: Muraho (hello), murakoze (thank you), amakuru (news). Ni iki ushaka kumenya? Saba umwarimu."
        ];
        const historyResponses = [
          "Rwanda's history: before colonial rule, it was a centralized monarchy under the Umwami. In 1890, it became part of German East Africa, later Belgian mandate. Independence came in 1962.",
          "The 1994 genocide against the Tutsi deeply affected our nation. Today we unite as 'Ndi Umunyarwanda'. Would you like to discuss unity and reconciliation efforts?",
          "Oral tradition preserved our history: ibitekerezo, dynastic poetry. King Mutara III Rudahigwa was known for modernizing. Ask me about any Mwami."
        ];
        const generalResponses = [
          "That's a thoughtful question. In general, learning is about curiosity. Could you tell me more about what you'd like to explore today?",
          "As your AI teacher, I'd say: break big problems into small steps. Whether in Kigali or countryside, every question leads to understanding. Want to focus on something specific?",
          "Great! Always ask 'why'. In 2026, smart learning means using technology to think deeper. What's on your mind?"
        ];

        let pool;
        switch(subject) {
          case 'Mathematics': pool = mathResponses; break;
          case 'English': pool = englishResponses; break;
          case 'Science': pool = scienceResponses; break;
          case 'Kinyarwanda': pool = kinyarwandaResponses; break;
          case 'History': pool = historyResponses; break;
          default: pool = generalResponses;
        }
        // pick semi-randomly based on question length for variety
        const index = (q.length + question.length) % pool.length;
        let base = pool[index];

        // Occasionally ask clarifying question (teacher tone)
        if (q.includes('help') || q.includes('how to') || q.includes('explain')) {
          base += ' Would you like me to go deeper or provide another example?';
        }
        return base;
      }

      // simulate thinking and respond
      function handleUserMessage() {
        const question = userInput.value.trim();
        if (!question || isThinking) return;

        // add user message
        addMessage(question, 'user', false);
        userInput.value = '';
        isThinking = true;
        thinkingDiv.style.display = 'flex';

        const subject = subjectSelect.value;

        // Simulate "reasoning" delay (400‚Äì900ms)
        setTimeout(() => {
          const rawAnswer = generateAIResponse(question, subject);
          // add AI message with typing effect
          addMessage(rawAnswer, 'ai', true);

          // hide thinking
          thinkingDiv.style.display = 'none';
          isThinking = false;

          // Auto‚Äëspeak if supported (voice output)
          if (speechSupported && speakBtn.innerText.includes('üîä')) {
            const utterance = new SpeechSynthesisUtterance(rawAnswer);
            utterance.lang = subject === 'Kinyarwanda' ? 'rw-RW' : 'en-US';
            utterance.rate = 0.9;
            utterance.pitch = 1.1;
            speechSynthesis.cancel(); // avoid overlapping
            speechSynthesis.speak(utterance);
          }
        }, 600); // thinking delay
      }

      // speak the last AI message (if any) or welcome
      function speakLastMessage() {
        if (!speechSupported) return;
        const messages = document.querySelectorAll('.ai-message');
        let lastAI;
        if (messages.length) lastAI = messages[messages.length-1]?.innerText;
        else lastAI = "Muraho! I'm your AI teacher. Please ask something.";
        // remove possible cursor span
        const text = lastAI.replace(/<span.*?>.*?<\/span>/g, '').trim();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 0.9;
        speechSynthesis.cancel();
        speechSynthesis.speak(utterance);
      }

      // event listeners
      sendBtn.addEventListener('click', () => handleUserMessage());
      userInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          handleUserMessage();
        }
      });
      speakBtn.addEventListener('click', speakLastMessage);

      // clear welcome if needed, but keep as first message
      // ensure no console errors: pre-check speech synthesis
      window.addEventListener('load', () => {
        // show welcome already present
        if (speechSupported) {
          // just preload voices
          window.speechSynthesis.getVoices();
        }
      });

      // optional: stop any speaking when new message
      const originalAdd = addMessage;
      window.addMessage = function() {
        if (speechSupported) speechSynthesis.cancel();
        originalAdd.apply(this, arguments);
      };
      // but we want speak only when auto checked, already inside timeout
      // final detail: toggle voice indicator? can be static
    })();
  </script>
</body>
</html>
